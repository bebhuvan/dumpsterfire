---
export const prerender = true;

import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import ArtworkShowcase from '../components/ArtworkShowcase.astro';

// Get real articles from content collection
const allArticles = await getCollection('articles');
const featuredArticle = allArticles.find(article => article.data.featured);
---

<BaseLayout title="From the Dumpster Fire">
  <!-- Main Content -->
  <main class="container">
    <!-- Opening Quote Block -->
    <blockquote class="quote-block" style="max-width: 700px; margin: 3rem auto">
      The internet has become a dumpster fire. Not all of it—there are still wonderful, thoughtful corners 
      where real humans create meaningful things. But finding them requires more archaeology than browsing.
      <cite class="quote-source sans">— Welcome to the rescue mission</cite>
    </blockquote>

    <!-- Featured Piece -->
    {featuredArticle && (
      <section id="featured">
        <article class="featured">
          <span class="featured-badge sans">Rescued from the flames</span>
          <h2 class="featured-title">
            <a href={`/articles/${featuredArticle.slug}`}>{featuredArticle.data.title}</a>
          </h2>
          <p class="featured-excerpt">
            {featuredArticle.data.excerpt}
          </p>
          <div class="article-source sans" style="margin-top: 1rem">{featuredArticle.data.source} · {featuredArticle.data.readingTime} min read</div>
          
          <aside class="curator-note">
            {featuredArticle.data.curatorNotes}
          </aside>
        </article>
      </section>
    )}

    <!-- Public Domain Art Showcase -->
    <section id="art">
      <ArtworkShowcase />
    </section>

    <!-- Closing Quote -->
    <blockquote class="quote-block" style="max-width: 600px; margin: 4rem auto">
      The fire's still burning, but occasionally you find something that didn't need to burn. 
      That's what we're doing here—rescue work.
      <cite class="quote-source sans">Ready to start curating</cite>
    </blockquote>
  </main>
</BaseLayout>
